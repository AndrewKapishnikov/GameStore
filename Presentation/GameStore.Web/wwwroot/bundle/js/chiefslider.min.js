"use strict";function hasTouchDevice(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}function hasElementInVew(n){const t=n.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,r=window.innerWidth||document.documentElement.clientWidth,u=t.top<=i&&t.top+t.height>=0,f=t.left<=r&&t.left+t.width>=0;return u&&f}function ChiefSlider(n,t){this._config={loop:!0,autoplay:!1,interval:5e3,pauseOnHover:!0,refresh:!0,swipe:!0};this._widthItem=0;this._widthWrapper=0;this._itemsInVisibleArea=0;this._transform=0;this._transformStep=0;this._intervalId=null;this._$root=null;this._$wrapper=null;this._$items=null;this._$itemList=null;this._$controlPrev=null;this._$controlNext=null;this._$indicatorList=null;this._minOrder=0;this._maxOrder=0;this._$itemByMinOrder=null;this._$itemByMaxOrder=null;this._minTranslate=0;this._maxTranslate=0;this._direction="next";this._updateItemPositionFlag=!1;this._activeItems=[];this._isTouchDevice=hasTouchDevice();this._init(n,t);this._addEventListener()}const SELECTOR_ITEM=".slider__item",SELECTOR_ITEMS=".slider__items",SELECTOR_WRAPPER=".slider__wrapper",SELECTOR_PREV='.slider__control[data-slide="prev"]',SELECTOR_NEXT='.slider__control[data-slide="next"]',SELECTOR_INDICATOR=".slider__indicators>li",SLIDER_TRANSITION_OFF="slider_disable-transition",CLASS_CONTROL="slider__control",CLASS_CONTROL_HIDE="slider__control_hide",CLASS_ITEM_ACTIVE="slider__item_active",CLASS_INDICATOR_ACTIVE="active";ChiefSlider.prototype._init=function(n,t){this._$root=n;this._$itemList=n.querySelectorAll(SELECTOR_ITEM);this._$items=n.querySelector(SELECTOR_ITEMS);this._$wrapper=n.querySelector(SELECTOR_WRAPPER);this._$controlPrev=n.querySelector(SELECTOR_PREV);this._$controlNext=n.querySelector(SELECTOR_NEXT);this._$indicatorList=n.querySelectorAll(SELECTOR_INDICATOR);const i=this._$itemList,f=i[0].offsetWidth,e=this._$wrapper.offsetWidth,r=Math.round(e/f);this._widthItem=f;this._widthWrapper=e;this._itemsInVisibleArea=r;this._transformStep=100/r;for(let n in t)this._config.hasOwnProperty(n)&&(this._config[n]=t[n]);for(let n=0,t=i.length;n<t;n++)i[n].dataset.index=n,i[n].dataset.order=n,i[n].dataset.translate=0,n<r&&this._activeItems.push(n);if(this._updateClassForActiveItems(),!this._config.loop){this._$controlPrev&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE);return}const u=i.length-1,o=-i.length*100;i[u].dataset.order=-1;i[u].dataset.translate=-i.length*100;i[u].style.transform="translateX(".concat(o,"%)");this._updateExtremeProperties();this._updateIndicators();this._autoplay()};ChiefSlider.prototype._addEventListener=function(){const n=this._$root;n.addEventListener("click",this._eventHandler.bind(this));this._config.autoplay&&this._config.pauseOnHover&&(n.addEventListener("mouseenter",function(){this._autoplay("stop")}.bind(this)),n.addEventListener("mouseleave",function(){this._autoplay()}.bind(this)));this._config.refresh&&window.addEventListener("resize",function(){window.requestAnimationFrame(this._refresh.bind(this))}.bind(this));this._config.loop&&(this._$items.addEventListener("transitionstart",function(){this._updateItemPositionFlag=!0;window.requestAnimationFrame(this._updateItemPosition.bind(this))}.bind(this)),this._$items.addEventListener("transitionend",function(){this._updateItemPositionFlag=!1}.bind(this)));this._isTouchDevice&&this._config.swipe&&(n.addEventListener("touchstart",function(n){this._touchStartCoord=n.changedTouches[0].clientX}.bind(this)),n.addEventListener("touchend",function(n){const i=n.changedTouches[0].clientX,t=i-this._touchStartCoord;t>50?this._moveToPrev():t<-50&&this._moveToNext()}.bind(this)));!this._isTouchDevice&&this._config.swipe&&(n.addEventListener("mousedown",function(n){this._touchStartCoord=n.clientX}.bind(this)),n.addEventListener("mouseup",function(n){const i=n.clientX,t=i-this._touchStartCoord;t>50?this._moveToPrev():t<-50&&this._moveToNext()}.bind(this)))};ChiefSlider.prototype._updateExtremeProperties=function(){const n=this._$itemList;this._minOrder=+n[0].dataset.order;this._maxOrder=this._minOrder;this._$itemByMinOrder=n[0];this._$itemByMaxOrder=n[0];this._minTranslate=+n[0].dataset.translate;this._maxTranslate=this._minTranslate;for(let t=0,i=n.length;t<i;t++){const i=n[t],r=+i.dataset.order;r<this._minOrder?(this._minOrder=r,this._$itemByMinOrder=i,this._minTranslate=+i.dataset.translate):r>this._maxOrder&&(this._maxOrder=r,this._$itemByMaxOrder=i,this._minTranslate=+i.dataset.translate)}};ChiefSlider.prototype._updateItemPosition=function(){if(this._updateItemPositionFlag){const r=this._$wrapper,t=r.getBoundingClientRect(),i=t.width/this._itemsInVisibleArea/2,n=this._$itemList.length;if(this._direction==="next"){const f=t.left,r=this._$itemByMinOrder;let u=this._minTranslate;const e=r.getBoundingClientRect();e.right<f-i&&(r.dataset.order=this._minOrder+n,u+=n*100,r.dataset.translate=u,r.style.transform="translateX(".concat(u,"%)"),this._updateExtremeProperties())}else{const f=t.right,r=this._$itemByMaxOrder;let u=this._maxTranslate;const e=r.getBoundingClientRect();e.left>f+i&&(r.dataset.order=this._maxOrder-n,u-=n*100,r.dataset.translate=u,r.style.transform="translateX(".concat(u,"%)"),this._updateExtremeProperties())}requestAnimationFrame(this._updateItemPosition.bind(this))}};ChiefSlider.prototype._updateClassForActiveItems=function(){const t=this._activeItems,n=this._$itemList;for(let i=0,r=n.length;i<r;i++){const r=n[i],u=+r.dataset.index;t.indexOf(u)>-1?r.classList.add(CLASS_ITEM_ACTIVE):r.classList.remove(CLASS_ITEM_ACTIVE)}};ChiefSlider.prototype._updateIndicators=function(){const n=this._$indicatorList,t=this._$itemList;if(n.length)for(let i=0,r=t.length;i<r;i++){const r=t[i];r.classList.contains(CLASS_ITEM_ACTIVE)?n[i].classList.add(CLASS_INDICATOR_ACTIVE):n[i].classList.remove(CLASS_INDICATOR_ACTIVE)}};ChiefSlider.prototype._move=function(){if(hasElementInVew(this._$root)){const i=this._direction==="next"?-this._transformStep:this._transformStep,n=this._transform+i;if(!this._config.loop){const t=this._transformStep*(this._$itemList.length-this._itemsInVisibleArea);if(n<-t||n>0)return;this._$controlPrev.classList.remove(CLASS_CONTROL_HIDE);this._$controlNext.classList.remove(CLASS_CONTROL_HIDE);n===-t?this._$controlNext.classList.add(CLASS_CONTROL_HIDE):n===0&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE)}const t=[];if(this._direction==="next")for(let n=0,i=this._activeItems.length;n<i;n++){let r=this._activeItems[n],i=++r;i>this._$itemList.length-1&&(i-=this._$itemList.length);t.push(i)}else for(let n=0,i=this._activeItems.length;n<i;n++){let r=this._activeItems[n],i=--r;i<0&&(i+=this._$itemList.length);t.push(i)}this._activeItems=t;this._updateClassForActiveItems();this._updateIndicators();this._transform=n;this._$items.style.transform="translateX(".concat(n,"%)")}};ChiefSlider.prototype._moveToNext=function(){this._direction="next";this._move()};ChiefSlider.prototype._moveToPrev=function(){this._direction="prev";this._move()};ChiefSlider.prototype._moveTo=function(n){const r=this._$indicatorList;let i=null,t=null;for(let u=0,f=r.length;u<f;u++){const f=r[u];if(f.classList.contains(CLASS_INDICATOR_ACTIVE)){const r=+f.dataset.slideTo;t===null?(i=r,t=Math.abs(n-i)):Math.abs(n-r)<t&&(i=r,t=Math.abs(n-i))}}if(t=n-i,t!==0){this._direction=t>0?"next":"prev";for(let n=1;n<=Math.abs(t);n++)this._move()}};ChiefSlider.prototype._eventHandler=function(n){const t=n.target;if(this._autoplay("stop"),t.classList.contains(CLASS_CONTROL))n.preventDefault(),this._direction=t.dataset.slide,this._move();else if(t.dataset.slideTo){const n=+t.dataset.slideTo;this._moveTo(n)}this._autoplay()};ChiefSlider.prototype._autoplay=function(n){if(this._config.autoplay){if(n==="stop"){clearInterval(this._intervalId);this._intervalId=null;return}this._intervalId===null&&(this._intervalId=setInterval(function(){this._direction="next";this._move()}.bind(this),this._config.interval))}};ChiefSlider.prototype._refresh=function(){const n=this._$itemList,r=n[0].offsetWidth,u=this._$wrapper.offsetWidth,t=Math.round(u/r);if(t!==this._itemsInVisibleArea){this._autoplay("stop");this._$items.classList.add(SLIDER_TRANSITION_OFF);this._$items.style.transform="translateX(0)";this._widthItem=r;this._widthWrapper=u;this._itemsInVisibleArea=t;this._transform=0;this._transformStep=100/t;this._updateItemPositionFlag=!1;this._activeItems=[];for(let i=0,r=n.length;i<r;i++){const r=n[i],u=i;r.dataset.index=u;r.dataset.order=u;r.dataset.translate=0;r.style.transform="translateX(0)";u<t&&this._activeItems.push(u)}if(this._updateClassForActiveItems(),window.requestAnimationFrame(function(){this._$items.classList.remove(SLIDER_TRANSITION_OFF)}.bind(this)),!this._config.loop){this._$controlPrev&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE);return}const i=n.length-1,f=-n.length*100;n[i].dataset.order=-1;n[i].dataset.translate=-n.length*100;n[i].style.transform="translateX(".concat(f,"%)");this._updateExtremeProperties();this._updateIndicators();this._autoplay()}};ChiefSlider.prototype.next=function(){this._moveToNext()};ChiefSlider.prototype.prev=function(){this._moveToPrev()};ChiefSlider.prototype.moveTo=function(n){this._moveTo(n)};ChiefSlider.prototype.refresh=function(){this._refresh()};const $slider=document.querySelector('[data-slider="chiefslider"]'),slider=new ChiefSlider($slider,{loop:!0,autoplay:!0,interval:7e3});